@page "/counter"
@inherits PersistentComponentBase

<PageTitle>Counter</PageTitle>

<MudContainer MaxWidth="MaxWidth.False">
    <PageHeading Text="Counter"></PageHeading>
    <MudText Class="mb-4">Current count: @_currentCount</MudText>
    <MudButton Color="Color.Primary" Variant="Variant.Filled" @onclick="IncrementCount">Click me</MudButton>
</MudContainer>


@code {
    private int _currentCount = 0;

    private void IncrementCount()
    {
        _currentCount++;
    }

    /// <inheritdoc />
    public override string GetKey() => "Counter";

    /// <inheritdoc />
    public override JsonNode GetLifetimePolicy() => new JsonObject
    {
        ["Lifetime"] = ComponentStateLifetime.Local.ToString()
    };

    /// <inheritdoc />
    public override JsonNode GetState()
    {
        return new JsonObject
        {
            ["CurrentCount"] = _currentCount
        };
    }

    /// <inheritdoc />
    public override void ApplyState(JsonNode state)
    {
        _currentCount = state["CurrentCount"].AsValue().GetValue<int>();
    }
}
